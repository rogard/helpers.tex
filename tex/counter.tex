% -----------------------------------------------------------------
% Copyright (C) 2025 by Erwann Rogard
% - Source repository: https://github.com/rogard/helpers.tex
% - Released under the LaTeX Project Public License v1.3c or later
% - See http://www.latex-project.org/lppl.txt
% -----------------------------------------------------------------
% Usage:
% - \CounterSet{ new = <infix> }
% - \CounterIncrement{<infix>}
% - \CounterUse{<infix>}
\ExplSyntaxOn
\tl_if_exist:NTF
\g__erw_counter_flag_tl
{\c_empty_tl}
{%
  \cs_new:Npn \__erw_counter_name:n
  %    type   - semantics
  #1 % string - <infix>
  {g_#1_int}
  \keys_define:nn{__erw_counter}
  {%
    new.code:n = {\int_gzero_new:c{\__erw_counter_name:n{#1}}}
  }
  \ProvideDocumentCommand{\CounterSet}{m}
  {\keys_set:nn{__erw_counter}{#1}}
  \cs_new_protected:Npn \__erw_counter_increment:n
  %    type   - semantics
  #1 % string - <infix>
  {%
    \int_incr:c{\__erw_counter_name:n{#1}}
  }
  \cs_new:Npn \__erw_counter_use:n
  %    type   - semantics
  #1 % string - <infix>
  {%
    \int_use:c{\__erw_counter_name:n{#1}}
  }
  \ProvideDocumentCommand{\CounterIncrement}{m}{\__erw_counter_increment:n{#1}}
  \ProvideDocumentCommand{\CounterUse}{m}{\__erw_counter_use:n{#1}}
  \tl_new:N\g__erw_counter_flag_tl
}
\ExplSyntaxOff
