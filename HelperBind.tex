%--------------------------------------------------------------------------------
% Source:
%       https://github.com/rogard/helpers.tex
% Usage:
%       \HelperBind
%       {<cmd>}
%       {<options>} 
%       \HelperBindNew
%       {<name>}
%--------------------------------------------------------------------------------
%TEST\documentclass{report}
\usepackage{etoolbox}
%TEST\usepackage{mwe}
\usepackage{pdfpages}
\usepackage{xparse}
\ExplSyntaxOn

\ifcsundef{HelperBindFlag}
{

% BACKEND

\tl_new:N \__erw_bind_cs
\seq_new:N \__erw_bind_op
\cs_new_protected:Nn \__erw_bind:nn
{
   \use:x{\__erw_bind_cs[#1]{#2}}
}
\cs_generate_variant:Nn \__erw_bind:nn {e}

%FRONTEND

\NewDocumentCommand{\HelperBind}
{mm}
{
\tl_set:Nn \__erw_bind_cs{\exp_not:N#1}
\seq_set_split:Nnn \__erw_bind_op {,} {#2}
%TEST\seq_use:Nn \__erw_bind_op {,}
}

\NewDocumentCommand{\HelperBindNew}
{om}
{
  \seq_set_eq:NN \l_tmpa_seq \__erw_bind_op
  \IfValueT{#1}{
    \seq_put_right:Nn \l_tmpa_seq {#1}
  }
  \__erw_bind:en{\seq_use:Nn\l_tmpa_seq{,}}{#2}
}

  \def\HelperBindFlag{}

}
{
  % do nothing
}

\ExplSyntaxOff
%TEST\begin{document}
%TEST\ExplSyntaxOn
%TEST
%TEST\ExplSyntaxOff
%TEST
%TEST\HelperBind
%TEST{\includepdf}
%TEST{
%TEST  angle=90,
%TEST  scale=0.85
%TEST}
%TEST
%TEST\HelperBindNew{example-image-a}
%TEST\HelperBindNew[pages={1}]{example-image-b}
%TEST
%TEST%\todo
%TEST
%TEST\end{document}
